<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="journal_achats" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="8b8d4d2a-d6a3-4e0b-b3e8-111111111111">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MySQLAdapter"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="date_debut" class="java.lang.String"/>
	<parameter name="date_fin" class="java.lang.String"/>
	<parameter name="fournisseur_id" class="java.lang.String"/>
	<parameter name="TITRE_RAPPORT" class="java.lang.String" isForPrompting="false"/>
	<parameter name="IMAGE_LOGO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT a.numero, a.date_achat, f.nom AS fournisseur, a.totalTTC,
    e.id            AS entreprise_id,
    e.nom           AS entreprise_nom,
    e.adresse       AS entreprise_adresse,
    e.telephone     AS entreprise_telephone,
    e.email         AS entreprise_email,
    e.site_web      AS entreprise_site_web,
    e.ninea         AS entreprise_ninea,
    e.rccm          AS entreprise_rccm,
    e.logo          AS entreprise_logo
        FROM achats a
        LEFT JOIN fournisseurs f ON a.fournisseur_id = f.id
        LEFT JOIN entreprise e ON a.entreprise_id = e.id
       WHERE
    (
        ($P{date_debut} IS NULL OR $P{date_fin} IS NULL)
        OR (a.date_achat BETWEEN $P{date_debut} AND $P{date_fin})
    )
    AND (
        $P{fournisseur_id} IS NULL OR f.id = $P{fournisseur_id}
)

        ORDER BY a.date_achat ASC]]>
	</queryString>
	<field name="numero" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date_achat" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fournisseur" class="java.lang.String"/>
	<field name="totalTTC" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="entreprise_id" class="java.lang.Integer"/>
	<field name="entreprise_nom" class="java.lang.String"/>
	<field name="entreprise_adresse" class="java.lang.String"/>
	<field name="entreprise_telephone" class="java.lang.String"/>
	<field name="entreprise_email" class="java.lang.String"/>
	<field name="entreprise_site_web" class="java.lang.String"/>
	<field name="entreprise_ninea" class="java.lang.String"/>
	<field name="entreprise_rccm" class="java.lang.String"/>
	<field name="entreprise_logo" class="java.lang.String"/>
	<title>
		<band height="60">
			<image>
				<reportElement x="0" y="0" width="60" height="60" uuid="7a554ae7-540d-4736-b43a-2b2cb2b8b39d"/>
				<imageExpression><![CDATA[$P{IMAGE_LOGO}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="0" y="0" width="555" height="49" uuid="aed4c133-96f1-4931-9380-c526db40b51f"/>
				<textElement textAlignment="Center" verticalAlignment="Top" markup="none">
					<font size="16" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{TITRE_RAPPORT} == null ? "Bon de Commande Fournisseur" : $P{TITRE_RAPPORT}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="20">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20" uuid="3cd1c60c-e976-4d1f-b3da-9f6fd9cf1913"/>
				<text><![CDATA[NumÃ©ro]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="0" width="100" height="20" uuid="e4fc4138-fe47-4780-99a3-6a9e10bfdf5e"/>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="0" width="200" height="20" uuid="5145f147-5d8b-49b5-a693-17b5be6c06a2"/>
				<text><![CDATA[Fournisseur]]></text>
			</staticText>
			<staticText>
				<reportElement x="400" y="0" width="100" height="20" uuid="bcc13284-089f-4012-8ee7-6ab3c575961b"/>
				<text><![CDATA[Montant]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20">
			<textField>
				<reportElement x="0" y="0" width="100" height="20" uuid="e25b14f6-d473-4889-934d-746e401d4211"/>
				<textFieldExpression><![CDATA[$F{numero}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="0" width="100" height="20" uuid="0016e16f-45c0-4d89-9965-e6d9f1f40d5a"/>
				<textFieldExpression><![CDATA[$F{date_achat}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="200" y="0" width="200" height="20" uuid="d7e3ab7d-811f-4420-9bdb-a8ae7296b19c"/>
				<textFieldExpression><![CDATA[$F{fournisseur}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="400" y="0" width="100" height="20" uuid="1d482e9c-467a-4a61-9c39-9d67cdddeb11"/>
				<textFieldExpression><![CDATA[$F{totalTTC}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
